<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <title>YouTube Player</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
    }
    #player {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
    .error {
      color: white;
      padding: 20px;
      text-align: center;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <iframe 
    id="player" 
    allowfullscreen 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
  ></iframe>

  <script>
    (function() {
      // Parse URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      
      // Get video ID (required)
      const videoId = urlParams.get('v');
      
      if (!videoId) {
        document.body.innerHTML = '<div class="error">Error: Missing video ID</div>';
        return;
      }

      // Get optional parameters
      const autoplay = urlParams.get('autoplay') || '1';
      const playsinline = urlParams.get('playsinline') || '1';
      const controls = urlParams.get('controls') || '1';
      const loop = urlParams.get('loop') || '1';
      const mute = urlParams.get('mute') || '0';
      const modestbranding = urlParams.get('modestbranding') || '1';
      const rel = urlParams.get('rel') || '0';

      // Build YouTube embed URL
      const embedParams = new URLSearchParams({
        autoplay: autoplay,
        playsinline: playsinline,
        controls: controls,
        modestbranding: modestbranding,
        rel: rel,
        loop: loop,
        playlist: videoId, // Required for loop to work
        mute: mute,
        enablejsapi: '1',
        origin: window.location.origin
      });

      const embedUrl = `https://www.youtube.com/embed/${videoId}?${embedParams.toString()}`;
      
      // Set iframe source
      document.getElementById('player').src = embedUrl;

      // Prevent scrolling
      document.addEventListener('touchmove', function(e) {
        e.preventDefault();
      }, { passive: false });
    })();
  </script>
</body>
</html>
